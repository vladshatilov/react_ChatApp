(this.webpackJsonpreact_chat_pubnub=this.webpackJsonpreact_chat_pubnub||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/chat_icon.260d02e4.svg"},46:function(e,t,a){e.exports=a(61)},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},58:function(e,t,a){e.exports=a.p+"static/media/img.81462e32.jpg"},61:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(18),i=a.n(c),l=(a(51),a(28)),r=a(31),o=a(32),u=a(34),m=a(33),h=(a(52),a(36)),d=a.n(h),g=a(81),p=a(86),b=a(82),f=a(83),E=a(87),v=a(29),N=(a(53),a(37)),w=a.n(N);var y=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1];return s.a.createElement("header",{className:"headerClassHolder"},s.a.createElement("div",{className:"LogoHeader"},s.a.createElement("img",{src:w.a,className:"App-logo",alt:"Chatix logo"})),s.a.createElement("div",{className:"RoomTitle"},s.a.createElement("h1",null,"Mini slack")),s.a.createElement("input",{id:"NameHolder",className:"name-input",value:c,placeholder:"Type your name to connect",onChange:function(e){return function(e){i(e.target.value)}(e)},onKeyDown:function(t){"Enter"===t.key&&(e.setNameInChat(c),document.getElementById("NameHolder").disabled=!0)}}))},k=a(84),S=a(85),C=(a(54),a(42)),M=(a(58),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).handleNewName=function(e){n.username=e,n.startPubNub(),n.pubnub.addListener({message:function(e){if(e.channel===n.state.channelName&&e.message.text){var t=n.state.messages;t.push(s.a.createElement(P,{key:n.state.messages.length,uuid:e.message.uuid,text:e.message.text,self:n.username==e.message.uuid,time:e.message.time})),n.setState({messages:t})}}})},n.startPubNub=function(){n.pubnub=new d.a({publishKey:"pub-c-954e6edf-f654-4196-87e1-c4aadd22220e",subscribeKey:"sub-c-b8e4093c-d8c1-11ea-b3f2-c27cb65b13f4",uuid:n.username}),n.pubnub.subscribe({channels:[n.state.channelName,"talk_init"]}),n.historyUpdate()},n.historyUpdate=function(){n.setState({messages:[]}),n.pubnub&&n.pubnub.history({channel:n.state.channelName,count:100,stringifiedTimeToken:!0},(function(e,t){var a,c=n.state.messages;for(a=0;a<t.messages.length;a++)c.push(s.a.createElement(P,{key:n.state.messages.length,uuid:t.messages[a].entry.uuid,text:t.messages[a].entry.text,self:n.username==t.messages[a].entry.uuid,time:t.messages[a].entry.time}));n.setState({messages:c})}))},n.shutDownPubNub=function(){n.pubnub.unsubscribe({channels:[n.state.channelName]}),n.setState({messages:[]})},n.publishMessage=function(){if(n.state.newMessage){var e=new Date,t={text:n.state.newMessage,uuid:n.username,time:"".concat(e.getHours(),":").concat(("0"+e.getMinutes().toString()).slice(-2)),self:!0};n.pubnub&&n.pubnub.publish({message:t,channel:n.state.channelName}),n.setState({newMessage:""}),n.state.showPicker&&n.setState({showPicker:!n.state.showPicker}),document.getElementById("typeMessageForm").focus()}},n.handleMessageChange=function(e){n.setState({newMessage:e.target.value})},n.handleNewMessage=function(e){"Enter"===e.key&&n.publishMessage()},n.handleChannelChange=function(e,t){t?n.setState({channelName:"talk_init"},(function(){n.historyUpdate()})):n.setState({channelName:"work_init"},(function(){n.historyUpdate()}))},n.addEmoji=function(e){n.setState({newMessage:[n.state.newMessage+e.native]})},n.togglePicker=function(){n.setState({showPicker:!n.state.showPicker})};return n.state={messages:[],channelName:"work_init",newMessage:"",newChannel:"",showPicker:!1},n.username="undefined",n}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){this.shutDownPubNub()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"AppWindow"},s.a.createElement(y,{setNameInChat:this.handleNewName}),s.a.createElement("div",{className:"chatWindow"},s.a.createElement("div",{className:"channelListSideBar"},s.a.createElement(j,{selectChannel:function(t,a){return e.handleChannelChange(t,a)}})),s.a.createElement("div",{className:"chatAndMessageWindow"},s.a.createElement(x,{messages:this.state.messages}),s.a.createElement(g.a,null,s.a.createElement(p.a,{id:"typeMessageForm",className:"inputFieldClass",placeholder:"Type here...",fullWidth:!0,value:this.state.newMessage,onKeyDown:this.handleNewMessage,onChange:this.handleMessageChange,maxlength:"15",inputProps:{"aria-label":"Description"},autoFocus:!0}),s.a.createElement("div",{className:"pickerStyle"},this.state.showPicker?s.a.createElement(C.a,{emoji:"",title:"",native:!0,onSelect:this.addEmoji}):null),s.a.createElement(b.a,{className:"butForSmile",onClick:this.togglePicker},"\u263a"),s.a.createElement(b.a,{size:"small",color:"primary",onClick:this.publishMessage},"Send")))))}}]),a}(n.Component));function j(e){var t=s.a.useState(0),a=Object(l.a)(t,2),n=a[0],c=a[1],i=function(t,a){c(a),e.selectChannel(t,a)};return s.a.createElement("div",{className:"classesroot"},s.a.createElement(f.a,{component:"nav","aria-label":"main mailbox folders"},s.a.createElement(E.a,{button:!0,selected:0===n,onClick:function(e){return i(e,0)}},s.a.createElement(k.a,null),s.a.createElement(S.a,{primary:"Work"})),s.a.createElement(E.a,{button:!0,selected:1===n,onClick:function(e){return i(e,1)}},s.a.createElement(k.a,null),s.a.createElement(S.a,{primary:"Talk"}))))}function x(e){var t=s.a.createRef();return Object(n.useEffect)((function(){t.current.scrollTop=t.current.scrollHeight}),[e,t]),s.a.createElement(f.a,{className:"listMessageFrame",component:"nav",ref:t},s.a.createElement(E.a,null,s.a.createElement(v.a,{component:"div"},e.messages)))}var P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{className:"nameStump"},this.props.uuid," "),s.a.createElement("span",{className:"timeStump"},this.props.time," ")),this.props.self?s.a.createElement("div",{className:"messageStumpSelf"},this.props.text):s.a.createElement("div",{className:"messageStump"},this.props.text))}}]),a}(n.Component),O=M;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.2b513dc5.chunk.js.map